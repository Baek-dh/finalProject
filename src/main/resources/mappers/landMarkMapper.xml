<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="landMarkMapper">

	<!-- 지역 조회용 sesultMap -->
	<resultMap type="Location" id="Location_rm">
		<id property="locationType" column="LOCATION_TYPE" />
		<result property="locationName" column="LOCATION_NAME"/>
	</resultMap>
	
	<!-- 랜드마크 목록 조회용 resultMap -->
	<resultMap type="landMark" id="landMark_rm">
		<id property="landMarkNo" column="LM_NO" />
		<result property="landMarkName" column="LM_NAME"/>
		<result property="landMarkContent" column="LM_CONTENT"/>
		<result property="thumbnail" column="THUMBNAIL"/>
	</resultMap>
	
	<!-- ==================================================================================================================== -->
	
	<!-- 지역 번호, 지역명 조회 -->
	<select id="selectBoardType" resultMap="Location_rm">
		SELECT * FROM LOCATIONS
		ORDER BY LOCATION_TYPE
	</select>
	
	<!-- 특정 지역의 랜드마크 수 조회 -->
	<select id="getListCount">
		SELECT COUNT(*) FROM LANDMARK
		WHERE LOCATION_TYPE = ?
		AND LM_FL = 'N'
	</select>
	
	<!-- 랜드마크 목록 조회 -->
	<select id="selectLandMarkList" resultMap="landMark_rm">
	SELECT LM_NO, LM_NAME, LM_CONTENT
	(SELECT LM_IMG_RENAME FROM LAND_IMG
	WHERE LANDMARK.LM_NO = LAND_IMG.LM_NO
	AND LM_IMG_LEVEL = 0) THUMBNAIL
	FROM LANDMARK
	JOIN LOCATIONS USING(LOCATION_TYPE)
	WHERE LM_FL = 'N'
	AND LOCATION_TYPE = ${locationType}
	ORDER BY LM_NO DESC
	</select>

</mapper>