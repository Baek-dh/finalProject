<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="noticeMapper">


	<!-- 공지 목록욕 resultMap -->
	<resultMap type="notice" id="notice_rm">
		<id property="noticeNo" column="MB_NO"/>
		<result property="noticeTitle" column="MB_TITLE"/>
		<result property="noticeCreate" column="MB_CREATE_DT"/>
		<result property="noticeType" column="MB_TYPE"/>
	</resultMap>

	
	<!-- 공지사항 전체 게시글 수 조회 -->
	<select id="getListCount" resultType="_int">
		SELECT COUNT(*) FROM MANAGER_BOARD
	</select>
	
	<!-- 공지사항 목록 조회 -->
	<select id="selectNoticeList" resultMap="notice_rm">
		SELECT MB_NO, MB_TITLE, 
			CASE WHEN MB_TYPE = 'NOTICE'
			    THEN '공지'
			    ELSE '이벤트'
			    END MB_TYPE,
			CASE WHEN SYSDATE - MB_CREATE_DT &lt; 1
			        THEN TO_CHAR(MB_CREATE_DT, 'HH:MI')
			        ELSE TO_CHAR(MB_CREATE_DT, 'YYYY-MM-DD')
			    END MB_CREATE_DT
			    
			FROM MANAGER_BOARD
			ORDER BY MB_NO DESC
	</select>
</mapper>
